CREATE TABLE mp_user_roles (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(50) NOT NULL, role VARCHAR(50) NOT NULL, UNIQUE INDEX UNIQ_3ED1E95D5E237E06 (name), UNIQUE INDEX UNIQ_3ED1E95D57698A6A (role), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mp_rdv_dinners (id INT AUTO_INCREMENT NOT NULL, host_id INT DEFAULT NULL, title VARCHAR(100) NOT NULL, eventDate DATETIME NOT NULL, description VARCHAR(256) NOT NULL, hostedBy VARCHAR(100) NOT NULL, contactPhone VARCHAR(100) NOT NULL, address VARCHAR(100) NOT NULL, city VARCHAR(100) NOT NULL, country VARCHAR(100) NOT NULL, latitude DOUBLE PRECISION DEFAULT NULL, longitude DOUBLE PRECISION DEFAULT NULL, INDEX IDX_589A66001FB8D185 (host_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mp_rdv_rsvp (id INT AUTO_INCREMENT NOT NULL, dinner_id INT DEFAULT NULL, user_id INT DEFAULT NULL, attendeeName VARCHAR(50) NOT NULL, INDEX IDX_E3303863C8B1AA0C (dinner_id), INDEX IDX_E3303863A76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mp_user_users (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(100) NOT NULL, password VARCHAR(100) NOT NULL, email VARCHAR(100) NOT NULL, salt VARCHAR(256) NOT NULL, accountNonExpired TINYINT(1) NOT NULL, accountNonLocked TINYINT(1) NOT NULL, credentialsNonExpired TINYINT(1) NOT NULL, enabled TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_9C6C6273F85E0677 (username), UNIQUE INDEX UNIQ_9C6C6273E7927C74 (email), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_role (user_id INT NOT NULL, role_id INT NOT NULL, INDEX IDX_2DE8C6A3A76ED395 (user_id), INDEX IDX_2DE8C6A3D60322AC (role_id), PRIMARY KEY(user_id, role_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE mp_rdv_dinners ADD CONSTRAINT FK_589A66001FB8D185 FOREIGN KEY (host_id) REFERENCES mp_user_users (id);
ALTER TABLE mp_rdv_rsvp ADD CONSTRAINT FK_E3303863C8B1AA0C FOREIGN KEY (dinner_id) REFERENCES mp_rdv_dinners (id);
ALTER TABLE mp_rdv_rsvp ADD CONSTRAINT FK_E3303863A76ED395 FOREIGN KEY (user_id) REFERENCES mp_user_users (id);
ALTER TABLE user_role ADD CONSTRAINT FK_2DE8C6A3A76ED395 FOREIGN KEY (user_id) REFERENCES mp_user_users (id) ON DELETE CASCADE;
ALTER TABLE user_role ADD CONSTRAINT FK_2DE8C6A3D60322AC FOREIGN KEY (role_id) REFERENCES mp_user_roles (id) ON DELETE CASCADE;
